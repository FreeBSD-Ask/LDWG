# 2025 年 8 月

**注意：** 关于任一条目的更多细节，请访问文中的 GitHub 链接，这些链接包含了更多细节以及相关材料的引用（如代码提交）。

## 八月完成的工作

### 电源管理

#### 现代待机（S0i3）的依赖项

许多现代待机（S0i3）的依赖项已经提交到了 FreeBSD 内核代码库。大部分和实现业界标准的高级电源管理——ACPI（高级配置与电源接口）有关。

GitHub 议题: [#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

### 显卡

#### 移植 Linux 6.9 显卡驱动

用于将 Linux 6.9 显卡驱动移植到 drm-kmod 的 [拉取请求](https://github.com/freebsd/drm-kmod/pull/361) 已合并至 drm-kmod 主分支。

>**注意：**
>
>FreeBSD 内核所支持的 Linux 显卡驱动已至 6.9（已合并入 main 分支），但是通过 port drm-kmod 安装的软件包仅支持 Linux LTS 版本（最高为 6.6）。用户若想使用 6.7–6.9 驱动，须自行编译。

GitHub 议题: [#50](https://github.com/FreeBSDFoundation/proj-laptop/issues/50)

## 本月审查的工作

### 电源管理

#### 更多现代待机（S0i3）依赖项

正在审查其他的现代待机（S0i3）依赖项，准备将其添加到 FreeBSD 内核代码库。大多与实现业界标准的高级电源管理 ACPI 有关。

GitHub 议题: [#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

### WiFi

#### 最近新增驱动的动态

针对 WiFi 驱动 iwlwifi、mt76、rtw88 和 rtw89 的更新（至 LinuxKPI v6.16）正在接受审查。

其中某项需要协调更新，同时发布 drm-kmod 的标签（Tag）和 ports 的更新。待完成后，即可集成这些变更，从而继续推进驱动更新。随后，这些变更将按照标准的 MFC（从 CURRENT 合并）流程回溯到 FreeBSD 15 和 14 版本。

GitHub 议题: [#86](https://github.com/FreeBSDFoundation/proj-laptop/issues/86)

#### 对 WiFi 6 (802.11ax) 支持的变动

为 FreeBSD 无线栈准备 WiFi 6 (802.11ax) 的工作正在审查中。已将 802.11ax 的内部结构和定义更新为正确的值，并从 LinuxKPI 移动至 `net80211`，使其能被更广泛地使用。当中有些更新已经可见于 `ifconfig`，这有助于调试 WiFi 6 的初始支持。

GitHub 议题: [#34](https://github.com/FreeBSDFoundation/proj-laptop/issues/34)（另见子任务 [#79](https://github.com/FreeBSDFoundation/proj-laptop/issues/79)）

#### 基于 LinuxKPI 的 WiFi 挂起与恢复

正在审查内核相关变更。本地测试价值有限，因此计划先提交到 main，默认禁用，用户可通过 sysctl 启用进行测试。如此，哪怕代码审查尚未完成，先行的提交也相对稳妥。

GitHub 议题: [#58](https://github.com/FreeBSDFoundation/proj-laptop/issues/58)

#### 对非标准音频接口和自动音频切换的支持

正在审查改进音频设备处理（尤其是带非标准引脚排列的音频接口）的工作。

这些变动包括：

1. 将 virtual_oss 移植到基本系统。它稳定了运行多年，没有理由不将其纳入基本系统，并且它是唯一一款基于 FreeBSD 原生 OSS 且被广泛使用的声音服务器。这也是第 2 项的依赖条件。
2. 启用系统内多个声卡设备之间的音频路由。这能在多路 PCM 设备间自动切换声音输出。你可以通过测试该变动来提供帮助（参见 issue #17）。

GitHub 议题: [#15](https://github.com/FreeBSDFoundation/proj-laptop/issues/15) 和 [#17](https://github.com/FreeBSDFoundation/proj-laptop/issues/17)

## 进展动态

### 电源管理

#### USB4 低功耗状态支持

一项为 USB4 添加 HCM（主机连接管理器）的重大更新已提交审查。此更改能使 USB4 控制器进入低功耗状态，这是现代待机（S0i3）所必需的。

代码即将提交以便进行测试。

GitHub 议题: [#61](https://github.com/FreeBSDFoundation/proj-laptop/issues/61)

#### 征集 S4（休眠）设计反馈

有关 S4（休眠）电源状态的解决方案设计现已发起征集意见。

请于 2025 年 9 月 30 日前提交意见。

[S4 休眠支持 - FreeBSD](https://lists.freebsd.org/archives/freebsd-arch/2025-August/001030.html)

#### 现代待机（S0i3）测试镜像

正在制作现代待机（S0i3）的测试镜像，很快就会发布。请关注 CURRENT 邮件列表以获取更多细节。

[CURRENT 邮件列表](https://lists.freebsd.org/archives/freebsd-current/)

#### 低功耗状态调试工具

在为低功耗状态开发提供合适的调试工具方面已有进展。我们正向处理器厂商寻求工具，同时也在持续推进 XHCI 调试工具。

GitHub 议题: [#38](https://github.com/FreeBSDFoundation/proj-laptop/issues/38)

### 显卡

#### 移植 Linux 6.10 显卡驱动

该任务中的大部分补丁已从 Linux 移植到 FreeBSD。仍有少量任务与回归问题需要完成。

针对 drm-kmod 的拉取请求已提交。

GitHub 议题: [#51](https://github.com/FreeBSDFoundation/proj-laptop/issues/51)

### 兼容性与系统需求

#### KDE 桌面安装方案

对于 FreeBSD 15.0，我们的目标是增补 FreeBSD 安装器，在安装方案中提供基于 KDE 的最小化桌面。初步概念是个低交互安装流程，安装完成后就直接进入 KDE 的图形化登录界面。

功能已经完成，目前正在本地进行测试。不久之后会分享到 FreeBSD 邮件列表以供测试。

GitHub 议题: [#25](https://github.com/FreeBSDFoundation/proj-laptop/issues/25)

#### 使用 pkgbase 在大/小版本间进行二进制升级的工具

此项工作已暂停，因为社区已有积极推进的努力来实现同一目标。

GitHub 议题: [#83](https://github.com/FreeBSDFoundation/proj-laptop/issues/83)

## 结语

我们正在项目目标上取得的进展显著，FreeBSD 基金会感谢所有做出贡献的人。

特别感谢：

* 我们的开发者：

  * Alfonso Siciliano
  * Aymeric Wibo
  * Bjoern Zeeb
  * Christos Margiolis
  * Isaac Freund
  * Jean-Sebastien Pedron
  * 許立文
  * Mitchell Horne
  * Olivier Certner
  * Tom Jones
* 项目团队：
  * Deb Goodkin
  * Ed Maste
  * Joe Mingrone
  * Alice Sowerby
* 笔记本与桌面工作组：
  * Chris Moerz
  * 所有参会者
* FreeBSD 项目
* Quantum Leap Research
* AMD（协助排查睡眠问题）
* 戴尔（开发了 UVC 内核驱动）
* Future Crew（提供了 iwx 驱动源代码）
* 奈飞（测试了我们的调度器补丁集）
