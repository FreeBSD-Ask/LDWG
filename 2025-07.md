# 2025 年 7 月

## 七月完成事项

### CURRENT 中默认启用 usbhid(4)

在 CURRENT 中已默认启用 usbhid，这让 FreeBSD 能支持的设备种类远多于以往驱动。usbhib 将优先于其他驱动用于支持鼠标、键盘和触控板等输入设备。

GitHub 问题追踪：[#76](https://github.com/FreeBSDFoundation/proj-laptop/issues/76)

### 现代待机（Modern standby）

三个 AMD SMU（AMD System Management Unit，AMD 系统管理单元）的更改已合并，这是实现 S0iX 支持的重要一步。

作为该工作的组成部分，其依赖的 [ACPICA 变更已被上游合并](https://github.com/acpica/acpica/pull/993)。待 ACPI 的下个版本发布，该变更将被回溯合并到 FreeBSD 中。

GitHub 问题追踪：[#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

### 改进 LinuxKPI 的 ACPI 支持

我们改进了 LinuxKPI 的 ACPI 支持，以使无线驱动无需修改即可编译。这是启用 WiFi 6 及后续功能的必要步骤。

GitHub 问题追踪：[#34](https://github.com/FreeBSDFoundation/proj-laptop/issues/34)

## 动态进展

### 电源管理

#### 现代待机（Modern standby）

在我们的开发分支中，S0i3 已在参考硬件上稳定运行。要在更多 AMD 系统上实现，还需要 GPIO 中断相关的更改：[D51588](https://reviews.freebsd.org/D51588)、[D51589](https://reviews.freebsd.org/D51589)。

我们正在准备一个测试镜像，用于帮助识别和调试固件接口问题。该镜像能让用户在 FreeBSD 主线之外继续开发期间测试现代待机特性。

GitHub 问题追踪：[#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

### USB 调试工具

基于 xhci 调试标准的内核调试功能已作为概念验证实现，目前存在两个 loader 实现中的错误，导致其尚无法作为 loader 控制台使用。

[xhci 调试支持的主机端已被提取并处于审查中](https://reviews.freebsd.org/D51299)。

GitHub 问题追踪：[#38](https://github.com/FreeBSDFoundation/proj-laptop/issues/38)

FreeBSD 还支持另一种基于 USB 串口设备的内核调试方法。目前正在进行更新，以使其在 FreeBSD 开箱即用，同时我们也在撰写相关文档以适用于所有版本的 FreeBSD。本月也进行了关于使用 USB 串口作为控制台的锁问题分析，但目前尚不明确是否能够在启用 witness 的情况下足够解锁以使用该功能。

GitHub 问题追踪：[#73](https://github.com/FreeBSDFoundation/proj-laptop/issues/73)

### 异构核心笔记本的高性能支持

我们正处于为混合性能核心和效率核心（**译者注：即英特尔大小核**）的异构系统设计调度器变更的早期阶段。将与其他拥有类似硬件经验的 FreeBSD 提交者合作进行此项工作。

作为此工作的组成部分，我们创建了一个 [Wiki 页面](https://wiki.freebsd.org/Scheduler/Hybrid)，用于概述相关技术、面临的挑战以及早期设计思路。

GitHub 问题追踪：[#22](https://github.com/FreeBSDFoundation/proj-laptop/issues/22)

### WiFi

### WiFi 6（802.11ax）支持进展

我们继续推进着 FreeBSD 无线网络栈对 WiFi 6（802.11ax）的支持准备工作。802.11ax 的内部结构和定义已更新为正确的数值，并从 LinuxKPI 移动到 `net80211`，以实现更广泛的可用性。其中一些更新已经见于 `ifconfig`，在初步支持 WiFi 6 时将有助于调试。

GitHub 问题追踪：[#34](https://github.com/FreeBSDFoundation/proj-laptop/issues/34)

### 基于 LinuxKPI 的 WiFi 的挂起与恢复支持

为基于 LinuxKPI 的 WiFi 驱动所进行的 PCI 相关更改现已实现挂起与恢复功能。然而，恢复后的图形输出仍无法正常工作，关于该问题的调试工作仍在进行中。

GitHub 问题追踪：[#58](https://github.com/FreeBSDFoundation/proj-laptop/issues/58)

### 兼容性与系统需求

#### 作为可选安装方案的 KDE 桌面

在 FreeBSD 15.0 中，我们的目标是增补安装程序，以提供基于 KDE 的最小桌面作为可选安装方案。社区项目提供了初步原型，即一个低交互的安装流程，在安装完成后直接进入 KDE 图形登录界面。

[一个正在进行中的开发分支可供试用](https://gitlab.com/alfix/kde-installer-dialogs)

我们当前正在评估所需的 `pkg` 依赖，以自动选择合适的图形驱动程序。

GitHub 问题追踪：[#25](https://github.com/FreeBSDFoundation/proj-laptop/issues/25)

### USBHID 外设支持

已在 CURRENT 中默认启用 USBHID，更广泛的测试发现了一项会导致二次验证硬件令牌（如 NitroKey、YubiKey）失效的问题。我们正在与社区合作，通过审查 [D41639](https://reviews.freebsd.org/D41639) 以及在 FreeBSD 论坛中共同解决该问题。

GitHub 问题追踪：[#75](https://github.com/FreeBSDFoundation/proj-laptop/issues/75)

### 对非标准音频插孔的支持及自动音频切换

我们持续改进着音频设备处理方式，特别是那些使用非标准插孔引脚排列的设备。

我们目前有一项开放审查，用于在系统内的多个音频设备之间启用音频路由功能。这应能实现在多 PCM 设备之间的声音输出自动切换。欢迎参与测试此变动：[https://reviews.freebsd.org/D50070](https://reviews.freebsd.org/D50070)

GitHub 问题追踪：[#17](https://github.com/FreeBSDFoundation/proj-laptop/issues/17)

### 特殊按键支持

我们正在研究 KDE 下对特殊按键的支持。在测试设备上，大多数按键开箱即用。音量、亮度以及媒体控制按键会被桌面环境自动识别并配置，同时可通过设置菜单重新配置。然而，在我们测试的系统中，某些按键如“飞行模式”无法被 KDE 识别。我们正进一步研究如何处理这些按键，并将编写相关文档帮助用户启用那些未被自动识别的按键。

GitHub 问题追踪：[#19](https://github.com/FreeBSDFoundation/proj-laptop/issues/19)

### HDMI 支持

我们已开始研究如何改进通过 HDMI 使用外接显示器的支持与选择。在 KDE 下，对 Framework 笔记本和多个外接显示器进行的初步测试结果令人振奋。

我们也开始研究如何添加对 DDC（Display Data Channel，数据显示通道）的支持，通过该接口可控制色彩、亮度和音量等设置。

GitHub 问题追踪：[#27](https://github.com/FreeBSDFoundation/proj-laptop/issues/27)

## 结语

本项目已进入第八个月，FreeBSD 基金会向所有贡献者表示感谢。

特别感谢以下人员：

**开发者：**

* Alfonso Siciliano
* Aymeric Wibo
* Bjoern Zeeb
* Christos Margiolis
* Isaac Freund
* Jean-Sebastien Pedron
* 許立文
* Mitchell Horne
* Olivier Certner
* Tom Jones

**项目团队：**

* Deb Goodkin
* Ed Maste
* Joe Mingrone
* Alice Sowerby

**笔记本和桌面工作组：**

* Chris Moerz
* 所有参与者

**FreeBSD 项目本身**
**Quantum Leap Research**
**AMD**，协助排查睡眠问题
**奈飞**，参与调度器补丁测试
**戴尔**，捐赠了 UVC 内核驱动
**Future Crew**，提供了 iwx WiFi 驱动源码

