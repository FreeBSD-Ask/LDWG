# 2025 年 12 月

>**注意**
>
>如需了解任何条目的更多细节，请访问所提供的 GitHub 链接，其中包含更详细的信息以及指向相关材料（如代码提交）的链接。

本月可供你查看的一些额外资源：

* 博客文章：[FreeBSD 弥合笔记本差距：第一年项目更新](https://freebsdfoundation.org/blog/freebsd-closes-the-laptop-gap-year-one-project-update/)
* 路线图：[笔记本项目路线图 Q4 更新](https://github.com/FreeBSDFoundation/proj-laptop/blob/main/monthly-updates/Q4-2025-roadmap.pdf)
* 范围更新：[GitHub 仓库中新添加的问题](https://github.com/FreeBSDFoundation/proj-laptop/issues?q=is%3Aissue%20state%3Aopen%20created%3A%3E2025-12-01)

## 回顾

#### S0i3 现代待机

本月对 S0i3 现代待机功能进行了若干持续改进和 bug 修复工作。这包括 S2idle（suspend to idle，挂起到休眠机制）以及 SPMC（System Power Management Controller，系统电源管理控制）功能。

GitHub issue [#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

## 正在推进

### 安装

#### KDE 桌面安装器方案

目前正在开发 FreeBSD 安装器中的桌面环境安装方案。我们的目标是在 15.1 中完成。本月我们对代码进行了重构，并添加了 NVIDIA GPU 的选择菜单，计划对其进行测试，兼容 VirtualBox 和 VMware，并将所有内容集成到 bsdinstall 中。

GitHub issue：[ #25 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/25)

### 电源

#### S4 休眠

团队正在以迭代方式推进 S4 解决方案，因为我们预计在过程中会出现未知因素。

已经开始开发将计算机状态保存到 S4 映像中的工作，从而可以不再使用占位用的 dummy 映像。

用于创建 dummy S4 映像并从该映像重新启动 FreeBSD 的工具已经完成，并正在为其添加 CI 流水线。

GitHub issue：[ #29 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/29)

#### 低功耗状态调试工具

三种不同的基于 USB 的调试方案正在进行。

##### USB 调试能力（DbC）

**本月无更新**

我们现在已经实现了在两台笔记本之间进行 Type-C 调试的可用概念验证。测试表明，USB3 调试线缆配合两个 Type-C / USB3 转接器，可以成功建立 xHCI 调试连接。该配置帮助我们确认了制作自定义 Type-C 线缆转接器所需的具体引脚连接。若拥有该转接器，将使调试对开发者而言更加容易，无需使用那些既难以获取又价格昂贵的专用线缆。

##### 硬件调试工具

我们一直在测试一块定制电路板，该电路板可在较新的 Framework 笔记本主处理器上启用 UART 通信功能，并且已经能够与笔记本的嵌入式控制器正常工作。我们已将其作为启动控制台运行，从而可以看到计算机启动序列期间发生的情况。这意味着我们可以诊断发生在早期启动阶段、笔记本从休眠中唤醒时，或因问题导致正常屏幕显示无法工作的情况。目前，测试笔记本的固件中存在一个导致问题的 Bug，我们正在修复它，以使一切能够正常运行。

##### USB 串口调试

**本月无更新**

与之前的报告一致，该支持在所有 FreeBSD 发布版本中均可用，但存在一些注意事项。在其他调试方法开发完成之前，进一步工作将被推迟。

在所有调试解决方案完成后，我们将把相关文档发布到 FreeBSD 手册章节中。

GitHub issue：[ #38 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/38) 和 [ #90 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/90)


### Wi-Fi

#### RealTek Wi-Fi 网卡支持

针对 rtw88 和 rtw89 驱动的 Wi-Fi 5 支持工作仍在进行。目前，rtw89 驱动已经能够成功接收数据并处理 Block Acknowledgment（用于高效数据传输的功能），但发送速率仍然停留在最慢的基础速率，无法提升。由于这些改动会影响与其他驱动（例如 iwlwifi 驱动）共享的核心系统，我们在修复时保持谨慎，因此改进会以更小的步骤逐步推进，以避免破坏现有功能。

GitHub issue：[ #99 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/99)

#### MediaTek Wi-Fi 网卡支持

针对 mt76 驱动（将支持 MT7921 / MT7922 芯片组）的 Wi-Fi 4 / 5 支持工作正在与 RealTek 的开发同步推进，其中大量工作对两者均适用。对 LinuxKPI 基础设施的一些改进（具体为 `struct page` 处理）已经完成。当前进展仍然受阻于尚待完成的 LinuxKPI 基础设施工作，具体包括 page pool 实现以及 drm-kmod 集成需求。

GitHub issue：[ #66 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/66)

### 显卡

#### 移植 Linux 6.11 显卡驱动

Linux 6.11 显卡驱动的移植工作已经启动，当前从 drm-kmod 相关工作开始。

GitHub issue：[ #52 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/52)

### 系统管理

#### 提升 pkgbasify 的使用安全性

针对 pkgbasify 的开发工作仍在进行。pkgbasify 是一款旨在以最小风险将现有非 pkgbase 的 FreeBSD 安装转换为使用 pkgbase 的工具。当前重点已经转向通过包注册而非文件覆盖的方式来实现更安全的转换方案。该方案涉及实现对 `pkg install --register-only` 的支持，使其能够在不修改文件系统中文件的情况下，将包注册到 pkg 数据库中。

GitHub issue：[ #91 ](https://github.com/FreeBSDFoundation/proj-laptop/issues/91)

### 集成测试

#### 面向笔记本项目功能的整体测试

我们的测试项目将于 1 月启动，更多细节请参阅专用的 GitHub 仓库：

[https://github.com/FreeBSDFoundation/freebsd-laptop-testing](https://github.com/FreeBSDFoundation/freebsd-laptop-testing)

## 致谢

FreeBSD 基金会谨向所有在本月及此前为该项目作出贡献的人表示感谢。

感谢以下人员与组织：

* 我们的开发者

  * Alfonso Siciliano
  * Aymeric Wibo
  * Bjoern Zeeb
  * Christos Margiolis
  * Isaac Freund
  * Jean-Sebastien Pedron
  * 許立文
  * Mitchell Horne
  * Olivier Certner
  * Siva Mahadevan
  * Tom Jones
* 项目团队：

  * Deb Goodkin
  * Ed Maste
  * Joe Mingrone
  * Alice Sowerby
* 笔记本与桌面工作组

  * Chris Moerz
  * 所有与会者
* FreeBSD 项目
* Quantum Leap Research
* AMD，协助排查睡眠相关问题。
* 戴尔，捐赠了 UVC 内核驱动。
* Future Crew，提供了 iwx 驱动源代码。
* Netflix，测试了我们的调度器补丁集。

有关 FreeBSD 基金会笔记本项目的更多信息，请参阅 [README](../README.md)。
